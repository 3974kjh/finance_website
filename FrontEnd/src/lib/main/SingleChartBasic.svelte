<script lang="ts">
  import { onMount, tick, createEventDispatcher } from 'svelte';
  import { LineChart, ProgressCircle, NewsInfoListComponent } from '$lib/component';
  import { getExpectStockValue } from '$lib/api-connector/FinanceApi';
  import { getSearchResultByNaverApi } from '$lib/api-connector/NaverApi';
  import { 
    getFinanceDataListByChartMode, 
    setUpDownRatioTag, setUpDownIcon, setUpDownColor, 
    calculateExpectFinanceScore,
    getNewInfoList
  } from '$lib/main';
  import { calculateRatio, formatCostValue, formatIncludeComma } from '$lib/utils/CommonHelper';
  import { NaverFinanceImg, CompanyGuideImg } from '$lib/images/logo';

  export let singleChartInfo: {
		title: string,
		searchDuration: {month: number, week: number},
		chartMode: string,
		chartKey: string,
    detailInfo: any
	};

  const dispatch = createEventDispatcher();

  let dataList: any = [];

  let durationModeList: Array<{name: string, value: {month: number, week: number}, isSelected: boolean}> = [
    { name: '10 YEAR', value: {month: 120, week: 520}, isSelected: false },
    { name: '5 YEAR', value: {month: 60, week: 260}, isSelected: false },
    { name: '2 YEAR', value: {month: 24, week: 104}, isSelected: false },
    { name: '1 YEAR', value: {month: 12, week: 52}, isSelected: true },
    { name: '6 MONTH', value: {month: 6, week: 26}, isSelected: false }
  ]

  let expectValue: string = '';
  let afterMonthExpectValue: string = '';
  let nowValue: string = '';
  let bottomValue: string = '';
  let topValue: string = '';
  let expectRatioValue: string = '';

  let calcSignalScoreResult = {
    crossNormalizeValue: null,
    volumeNormalizeValue: null,
    lineNormalizeValue: null,
    expectNormalizeValue: null
  }

  let signalScoreWeight = {
    crossWeight: 35,
    volumeWeight: 25,
    lineWeight: 15,
    expectWeight: 25
  }

  let isProgress: boolean = false;

  let newInfoList: any = [];

  onMount(async () => {
    if (!!!singleChartInfo) {
      return;
    }

    isProgress = true;

    durationModeList = setSelectDurationModeList(durationModeList, singleChartInfo?.searchDuration);
    dataList = await setSingleChartDataList(singleChartInfo?.searchDuration);
    newInfoList = await getNewInfoList(singleChartInfo.title, 20, 1);

    isProgress = false;
  })

  const getSelectedDurationModeValue = (list: any) => {
    const selectedDurationMode = list.find((item: any) => item.isSelected);

    return selectedDurationMode?.value;
  }

  const setSelectDurationModeList = (list: any, durationValue: any) => {
    if (list.length < 1) {
      return [];
    }

    return list.map((item: any) => {
      if (item.value?.month === durationValue?.month) {
        return {
          ...item,
          isSelected: true
        }
      } else {
        return {
          ...item,
          isSelected: false
        }
      }
    })
  }

  /**
   * Ìï¥Îãπ Ï£ºÏãùÏùò ÏÉÅÏÑ∏ Í∑∏ÎûòÌîÑ ÌëúÏãúÎ•º ÏúÑÌïú Îç∞Ïù¥ÌÑ∞ Í∞í Ï°∞Ìöå
  */
  const setSingleChartDataList = async (duration: {month: number, week: number}) => {
    const financeDataResult = await getFinanceDataListByChartMode(singleChartInfo.chartKey, duration.month, true);

    if (financeDataResult.length < 1) {
      return [];
    }
    
    const expectResult = await getExpectStockValue({symbol: singleChartInfo.chartKey, term: duration.week});

    if (!!!expectResult || !!!expectResult?.data || expectResult.length < 1) {
      return [];
    }

    nowValue = expectResult.data?.nowValue;
    expectValue = expectResult.data?.expectValue;
    afterMonthExpectValue = expectResult.data?.afterMonthExpectValue;
    bottomValue = expectResult.data?.bottomValue;
    topValue = expectResult.data?.topValue;
    expectRatioValue = expectResult.data?.expectRatioValue;

    // Ïù¥ÎèôÌèâÍ∑† Í≥ÑÏÇ∞ Ìï®Ïàò
    const calculateMA = (data: any, moveSize: number): (number | string | null)[] => {
      const movingAverages: (number | string | null)[] = [];
      for (let index = 0; index < data.length; index++) {
        if (index < moveSize - 1) {
          // Îç∞Ïù¥ÌÑ∞Í∞Ä Î∂ÄÏ°±Ìïú Í≤ΩÏö∞ nullÎ°ú ÌëúÏãú
          movingAverages.push(null);
        } else {
          const moveList = data.slice(index - moveSize + 1, index + 1);
          const sum = moveList.reduce((acc: any, cur: any) => acc + cur.Open, 0);
          movingAverages.push(formatCostValue(sum / moveSize));
        }
      }
      return movingAverages;
    };

    // Í∞Å Ïù¥ÎèôÌèâÍ∑† Í≥ÑÏÇ∞
    const ma5 = calculateMA(financeDataResult, 5);
    const ma20 = calculateMA(financeDataResult, 20);
    const ma60 = calculateMA(financeDataResult, 60);

    // Ìï¥Îãπ Ï£ºÍ∞ÄÏùò Ïó¨Îü¨ ÏöîÏù∏Îì§ÏùÑ Ï¢ÖÌï©ÌïòÏó¨ Í∞Å ÏöîÏù∏Î≥Ñ Ï†êÏàòÎ•º Í≥ÑÏÇ∞ÌïòÏó¨ ÏùºÎ∞òÌôîÌïú Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
    calcSignalScoreResult = calculateExpectFinanceScore(
      financeDataResult,
      parseFloat(singleChartInfo.detailInfo?.marcap),
      parseFloat(singleChartInfo.detailInfo?.amount),
      parseFloat(topValue),
      parseFloat(bottomValue),
      parseFloat(expectValue),
      parseFloat(expectRatioValue)
    )

    return financeDataResult.map((data: any, index: number) => {
      return {
        ...data,
        afterMonthExpectValue: expectResult.data?.afterMonthExpectValue,
        bottomValue: expectResult.data?.bottomValue,
        expectValue: expectResult.data?.expectValue,
        nowValue: expectResult.data?.nowValue,
        topValue: expectResult.data?.topValue,
        ma5: ma5[index] ?? undefined,
        ma20: ma20[index] ?? undefined,
        ma60: ma60[index] ?? undefined,
      }
    });
  }

  /**
   * Í∞ÄÏ§ëÏπò Ï¥ù Ìï© Î¶¨ÌÑ¥
  */
  const sumWeight = (scoreWeight: any) => {
    return scoreWeight.crossWeight + scoreWeight.volumeWeight + scoreWeight.lineWeight + scoreWeight.expectWeight;
  }

  /**
   * scoreÏôÄ Í∞ÄÏ§ëÏπòÎ•º Í≥±Ìïú ÏµúÏ¢Ö Í≤∞Í≥º Í∞í Î¶¨ÌÑ¥
  */
  const calculateSignalScore = (score: any, scoreWeight: any) => {
    return scoreWeight.crossWeight * score.crossNormalizeValue + scoreWeight.volumeWeight * score.volumeNormalizeValue + scoreWeight.lineWeight * score.lineNormalizeValue + scoreWeight.expectWeight * score.expectNormalizeValue;
  }

  /**
   * Î≤ÑÌäº Í∏∞Í∞Ñ Î™Ö ÌëúÏãú Î¨∏Íµ¨
  */
  const showDurationButtonText = (durationName: string) => {
    if (durationName.includes(' YEAR')) {
      return durationName.replace(' YEAR', 'ÎÖÑ');
    } else {
      return durationName.replace(' MONTH', 'Îã¨');
    }
  }

  let clientHeight: number = 0;

  $: console.log(clientHeight);

</script>

<div class="flex flex-col w-full h-full bg-white absolute p-2 space-y-2" style="top: 0px; left: 0px" bind:clientHeight={clientHeight}>
  {#if singleChartInfo}
    <div class="flex w-full h-auto">
      <button on:click={() => {
        dispatch('closeSingleChartModeCallback');
      }}>üîô</button>
      <div class="flex grow justify-center font-bold">
        {singleChartInfo?.title ?? '-'}
      </div>
      <div class="flex justify-end mr-2 space-x-1">
        <a 
          class="border rounded-md"
          href="{`https://comp.fnguide.com/SVO2/ASP/SVD_Main.asp?pGB=1&gicode=A${singleChartInfo?.chartKey ?? ''}`}"
          title="FnGuide_{singleChartInfo?.title}"
          target="_blank"
          style="
            background-image: url({CompanyGuideImg});
            background-size: cover;
            background-position: center;
            width: 28px;   /* Î≤ÑÌäº ÌÅ¨Í∏∞ ÏßÄÏ†ï */
            height: 28px;
          "
        />
        <a
          class="border rounded-md"
          href="{`https://finance.naver.com/item/main.naver?code=${singleChartInfo?.chartKey ?? ''}`}"
          title="NAVER_{singleChartInfo?.title}"
          target="_blank"
          style="
            background-image: url({NaverFinanceImg});
            background-size: cover;
            background-position: center;
            width: 28px;   /* Î≤ÑÌäº ÌÅ¨Í∏∞ ÏßÄÏ†ï */
            height: 28px;
          "
        />
      </div>
    </div>
    <div class="flex flex-row w-full grow space-x-2" style="height: {clientHeight - 50}px">
      <div class="flex w-[80%] h-full border rounded-md">
        {#if dataList.length > 0 && isProgress === false}
          {#key dataList}
            <LineChart
              lineDataList={dataList}
              isMultiLine={true}
              isDetailMode={true}
            />
          {/key}
        {:else if isProgress}
          <div class="flex w-full h-full justify-center items-center font-bold text-gray">
            <ProgressCircle
              size={100}
              thickness={10}
              isLarge={true}
              text={'Ìï¥Îãπ Ï¢ÖÎ™© Î∂ÑÏÑù Ï§ë...'}
            />
          </div>
        {:else}
          <div class="flex w-full h-full justify-center items-center font-bold text-gray">
            {'Ìï¥Îãπ Ï¢ÖÎ™©Ïùò Ï°∞Ìöå Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.'}
          </div>
        {/if}
      </div>
      <div class="flex flex-col w-[20%] h-full border rounded-md p-2 space-y-2 overflow-auto scrollbar-thin-custom">
        <!-- Ï°∞Ìöå Í∏∞Í∞Ñ ÏÑ§Ï†ï -->
        <div class="flex flex-row w-full items-center border rounded-md bg-gray-50 p-2">
          <p class="w-[30%]">Ï°∞Ìöå Í∏∞Í∞Ñ</p>
          <div class="grow space-x-1">
            {#each durationModeList as durationMode}
              <button
                class="border rounded-md px-1 border-gray-400 {durationMode.isSelected ? 'bg-gray-200' : 'bg-white'}"
                on:click={async () => {
                  isProgress = true;

                  durationModeList = setSelectDurationModeList(durationModeList, durationMode.value);
                  dataList = await setSingleChartDataList(durationMode.value);

                  isProgress = false;
                }}
              >
                {showDurationButtonText(durationMode.name)}
              </button>
            {/each}
          </div>
        </div>
        <!-- ÏòàÏ∏° Îç∞Ïù¥ÌÑ∞ Í∞í ÌëúÏãú -->
        <div class="flex flex-col w-full border rounded-md bg-gray-50 p-2 space-y-2">
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">ÌòÑÏû¨ Í∞Ä</p>
            <div class="grow">
              {`${formatIncludeComma(formatCostValue(dataList[dataList.length - 1]?.Close)) ?? '-'} ‚Ç©`}
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">ÌòÑÏû¨ ÏòàÏ∏°Í∞Ä</p>
            <div class="grow">
              <span>{`${formatIncludeComma(expectValue) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(formatCostValue(dataList[dataList.length - 1]?.Close) ?? 0, expectValue ?? 0)}
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">ÌïúÎã¨Îí§ ÏòàÏ∏°Í∞Ä</p>
            <div class="grow">
              <span>{`${formatIncludeComma(afterMonthExpectValue) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(formatCostValue(dataList[dataList.length - 1]?.Close) ?? 0, afterMonthExpectValue ?? 0)}
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">ÏßÄÏßÄÌèâÍ∑†Í∞í</p>
            <div class="grow">
              <span>{`${formatIncludeComma(bottomValue) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(formatCostValue(dataList[dataList.length - 1]?.Close) ?? 0, bottomValue ?? 0)}
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">Ï†ÄÌï≠ÌèâÍ∑†Í∞í</p>
            <div class="grow">
              <span>{`${formatIncludeComma(topValue) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(formatCostValue(dataList[dataList.length - 1]?.Close) ?? 0, topValue ?? 0)}
            </div>
          </div>
        </div>
        <!-- Ïù¥ÌèâÏÑ† Îç∞Ïù¥ÌÑ∞ Í∞í ÌëúÏãú -->
        <div class="flex flex-col w-full border rounded-md bg-gray-50 p-2 space-y-2">
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">5Ïùº Ïù¥ÌèâÏÑ†</p>
            <div class="grow">
              <span>{`${formatIncludeComma(dataList[dataList.length - 1]?.ma5) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(dataList[dataList.length - 1]?.ma5 ?? 0, nowValue ?? 0)}
              <span>{'(Îã®Í∏∞ Ï∂îÏÑ∏)'}</span>
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">20Ïùº Ïù¥ÌèâÏÑ†</p>
            <div class="grow">
              <span>{`${formatIncludeComma(dataList[dataList.length - 1]?.ma20) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(dataList[dataList.length - 1]?.ma20 ?? 0, dataList[dataList.length - 1]?.ma5 ?? 0)}
              <span>{'(Ï§ëÍ∏∞ Ï∂îÏÑ∏)'}</span>
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[30%]">60Ïùº Ïù¥ÌèâÏÑ†</p>
            <div class="grow">
              <span>{`${formatIncludeComma(dataList[dataList.length - 1]?.ma60) ?? '-'} ‚Ç©`}</span>
              {@html setUpDownRatioTag(dataList[dataList.length - 1]?.ma60 ?? 0, dataList[dataList.length - 1]?.ma20 ?? 0)}
              <span>{'(Ïû•Í∏∞ Ï∂îÏÑ∏)'}</span>
            </div>
          </div>
        </div>
        <!-- Ìï≠Î™© Îç∞Ïù¥ÌÑ∞ Í∞í ÌëúÏãú -->
        {#if dataList.length > 0}
          <div class="flex flex-col w-full border rounded-md bg-gray-50 p-2 space-y-2">
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">Ï¢ÖÎ™© Î™Ö</p>
              <div class="grow">
                {singleChartInfo.detailInfo?.name ?? '-'}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">Ï¢ÖÎ™© ÏΩîÎìú</p>
              <div class="grow">
                {singleChartInfo.detailInfo?.code ?? '-'}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÌòÑÏû¨Í∞Ä</p>
              <div class="grow">
                {`${formatIncludeComma(formatCostValue(dataList[dataList.length - 1]?.Close)) ?? '-'} ‚Ç©`}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">Ï†ÑÏùºÎåÄÎπÑ</p>
              <div class="grow" style="color: {setUpDownColor(singleChartInfo.detailInfo?.chagesRatio)}">
                {`${setUpDownIcon(singleChartInfo.detailInfo?.chagesRatio)}${singleChartInfo.detailInfo?.chagesRatio ?? '-'}%`}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏãúÏ¥àÍ∞Ä</p>
              <div class="grow">
                <span>{`${formatIncludeComma(formatCostValue(dataList[dataList.length - 1]?.Open)) ?? '-'} ‚Ç©`}</span>
                {@html setUpDownRatioTag(nowValue ?? 0, dataList[dataList.length - 1]?.Open ?? 0)}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏùºÏùºÏµúÍ≥†Í∞Ä</p>
              <div class="grow">
                <span>{`${formatIncludeComma(formatCostValue(dataList[dataList.length - 1]?.High)) ?? '-'} ‚Ç©`}</span>
                {@html setUpDownRatioTag(nowValue ?? 0, dataList[dataList.length - 1]?.High ?? 0)}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏùºÏùºÏµúÏ†ÄÍ∞Ä</p>
              <div class="grow">
                <span>{`${formatIncludeComma(formatCostValue(dataList[dataList.length - 1]?.Low)) ?? '-'} ‚Ç©`}</span>
                {@html setUpDownRatioTag(nowValue ?? 0, dataList[dataList.length - 1]?.Low ?? 0)}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏùºÏùºÍ±∞ÎûòÎüâ</p>
              <div class="grow">
                {`${formatIncludeComma(dataList[dataList.length - 1]?.Volume) ?? '-'} (Ï£º)`}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏãúÍ∞ÄÏ¥ùÏï°</p>
              <div class="grow">
                {`${formatIncludeComma(singleChartInfo.detailInfo?.marcap) ?? '-'} ‚Ç©`}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">ÏùºÏùºÍ±∞ÎûòÎåÄÍ∏à</p>
              <div class="grow">
                {`${formatIncludeComma(singleChartInfo.detailInfo?.amount) ?? '-'} ‚Ç©`}
              </div>
            </div>
            <div class="flex flex-row h-auto w-full items-center">
              <p class="w-[30%]">Í±∞Îûò Ïú†ÎèôÏÑ±</p>
              <div class="grow">
                {`${calculateRatio(singleChartInfo.detailInfo?.marcap, singleChartInfo.detailInfo?.amount) ?? '-'}% (1%Ïù¥ÏÉÅ Ï¢ãÏùå, 5%Ïù¥ÏÉÅ Îß§Ïö∞Ï¢ãÏùå)`}
              </div>
            </div>
          </div>
        {/if}
        <!-- Ï£ºÍ∞Ä Ï†êÏàò Îç∞Ïù¥ÌÑ∞ Í∞í ÌëúÏãú -->
        <div class="flex flex-col w-full border rounded-md bg-gray-50 p-2 space-y-2">
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[23%] bg-gray-200">Ï∂îÏÑ∏ Ïã†Ìò∏</p>
            <p class="w-[27%] bg-gray-200">(0 ~ 1)</p>
            <div class="flex flex-row grow">
              <p class="w-[30%]" style="text-align: right;">{calcSignalScoreResult?.crossNormalizeValue ?? '-'}</p>
              <div class="flex grow justify-end">
                <span class="mr-2">Í∞ÄÏ§ëÏπò</span>
                <input autocomplete="off" bind:value={signalScoreWeight.crossWeight} placeholder="ÏûÖÎ†•" type="number" class="border w-[50px] px-1 mr-1" max={100} min={0}/>
                <span>%</span>
              </div>
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[23%] bg-gray-200">Í±∞ÎûòÎüâ</p>
            <p class="w-[27%] bg-gray-200">(0 ~ 1)</p>
            <div class="flex flex-row grow">
              <p class="w-[30%]" style="text-align: right;">{calcSignalScoreResult?.volumeNormalizeValue ?? '-'}</p>
              <div class="flex grow justify-end">
                <span class="mr-2">Í∞ÄÏ§ëÏπò</span>
                <input autocomplete="off" bind:value={signalScoreWeight.volumeWeight} placeholder="ÏûÖÎ†•" type="number" class="border w-[50px] px-1 mr-1" max={100} min={0}/>
                <span>%</span>
              </div>
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[23%] bg-gray-200">ÏßÄÏßÄ/Ï†ÄÌï≠</p>
            <p class="w-[27%] bg-gray-200">(0 ~ 1)</p>
            <div class="flex flex-row grow">
              <p class="w-[30%]" style="text-align: right;">{calcSignalScoreResult?.lineNormalizeValue ?? '-'}</p>
              <div class="flex grow justify-end">
                <span class="mr-2">Í∞ÄÏ§ëÏπò</span>
                <input autocomplete="off" bind:value={signalScoreWeight.lineWeight} placeholder="ÏûÖÎ†•" type="number" class="border w-[50px] px-1 mr-1" max={100} min={0}/>
                <span>%</span>
              </div>
            </div>
          </div>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[23%] bg-gray-200">ÏòàÏ∏° Ï∂îÏÑ∏</p>
            <p class="w-[27%] bg-gray-200">(0 ~ 1)</p>
            <div class="flex flex-row grow">
              <p class="w-[30%]" style="text-align: right;">{calcSignalScoreResult?.expectNormalizeValue ?? '-'}</p>
              <div class="flex grow justify-end">
                <span class="mr-2">Í∞ÄÏ§ëÏπò</span>
                <input autocomplete="off" bind:value={signalScoreWeight.expectWeight} placeholder="ÏûÖÎ†•" type="number" class="border w-[50px] px-1 mr-1" max={100} min={0}/>
                <span>%</span>
              </div>
            </div>
          </div>
          <div class="border w-full h-[1px]"/>
          <div class="flex flex-row h-auto w-full items-center">
            <p class="w-[23%] {calculateSignalScore(calcSignalScoreResult, signalScoreWeight) > 50 ? 'bg-red-100 text-red-500' : 'bg-blue-100 text-blue-500'} font-bold">Total Score</p>
            <p class="w-[27%] {calculateSignalScore(calcSignalScoreResult, signalScoreWeight) > 50 ? 'bg-red-100 text-red-500' : 'bg-blue-100 text-blue-500'} font-bold">(0 ~ 100)</p>
            <div class="flex flex-row grow">
              <p style="text-align: right;" class="{calculateSignalScore(calcSignalScoreResult, signalScoreWeight) > 50 ? 'text-red-500' : 'text-blue-500'} w-[30%] font-bold">{calculateSignalScore(calcSignalScoreResult, signalScoreWeight) ?? '-'}</p>
              <div class="flex grow justify-end">
                <span class="mr-2">Ï¥ùÍ≥Ñ </span>
                <input autocomplete="off" disabled value={sumWeight(signalScoreWeight)} placeholder="Ï†ÑÏ≤¥" type="text" class="border w-[50px] px-1 mr-1" max={100} min={0}/>
                <span>%</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Îâ¥Ïä§ Ï†ïÎ≥¥ -->
        <div class="flex flex-col h-[345px]">
          <NewsInfoListComponent
            bind:newInfoList
          />
        </div>
      </div>
    </div>
  {/if}
</div>

<style>
  /* FirefoxÏö© */
  .scrollbar-thin-custom {
    scrollbar-width: thin;           /* ÏñáÏùÄ Ïä§ÌÅ¨Î°§Î∞î */
    scrollbar-color: #000000 transparent; /* Ïç∏ ÏÉâÏÉÅ, Ìä∏ÎûôÏùÄ Ìà¨Î™Ö */
  }
  /* Webkit(ÌÅ¨Î°¨, ÏÇ¨ÌååÎ¶¨ Îì±)Ïö© */
  .scrollbar-thin-custom::-webkit-scrollbar {
    height: 6px;                     /* Í∞ÄÎ°ú Ïä§ÌÅ¨Î°§Î∞î ÎëêÍªò */
    background: transparent;         /* Ìä∏Îûô(Î∞∞Í≤Ω) Ìà¨Î™Ö */
  }
  .scrollbar-thin-custom::-webkit-scrollbar-thumb {
    background: #000000;                /* Ïç∏(ÏõÄÏßÅÏù¥Îäî Î∂ÄÎ∂Ñ) ÏÉâÏÉÅ */
    border-radius: 4px;              /* Îë•Í∑º Î™®ÏÑúÎ¶¨ */
  }
  .scrollbar-thin-custom::-webkit-scrollbar-thumb:hover {
    background: #555;                /* Ïç∏ Ìò∏Î≤Ñ Ïãú ÏÉâÏÉÅ */
  }
</style>